(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function Er(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Si(t){return t.length===1&&(t=Ei(t)),{left:function(n,e,r,i){for(r==null&&(r=0),i==null&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(r==null&&(r=0),i==null&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}function Ei(t){return function(n,e){return Er(t(n),e)}}Si(Er);function Nr(t){for(var n=t.length,e,r=-1,i=0,o,u;++r<n;)i+=t[r].length;for(o=new Array(i);--n>=0;)for(u=t[n],e=u.length;--e>=0;)o[--i]=u[e];return o}var Ni={value:function(){}};function Rr(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new hn(e)}function hn(t){this._=t}function Ri(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}hn.prototype=Rr.prototype={constructor:hn,on:function(t,n){var e=this._,r=Ri(t+"",e),i,o=-1,u=r.length;if(arguments.length<2){for(;++o<u;)if((i=(t=r[o]).type)&&(i=Ci(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<u;)if(i=(t=r[o]).type)e[i]=ke(e[i],t.name,n);else if(n==null)for(i in e)e[i]=ke(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new hn(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function Ci(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function ke(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Ni,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var Qn="http://www.w3.org/1999/xhtml";const Te={svg:"http://www.w3.org/2000/svg",xhtml:Qn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $n(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Te.hasOwnProperty(n)?{space:Te[n],local:t}:t}function Mi(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Qn&&n.documentElement.namespaceURI===Qn?n.createElement(t):n.createElementNS(e,t)}}function Ai(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Cr(t){var n=$n(t);return(n.local?Ai:Mi)(n)}function bi(){}function Ee(t){return t==null?bi:function(){return this.querySelector(t)}}function Pi(t){typeof t!="function"&&(t=Ee(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],u=o.length,s=r[i]=new Array(u),f,a,l=0;l<u;++l)(f=o[l])&&(a=t.call(f,f.__data__,l,o))&&("__data__"in f&&(a.__data__=f.__data__),s[l]=a);return new G(r,this._parents)}function Li(){return[]}function Mr(t){return t==null?Li:function(){return this.querySelectorAll(t)}}function ki(t){typeof t!="function"&&(t=Mr(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u=n[o],s=u.length,f,a=0;a<s;++a)(f=u[a])&&(r.push(t.call(f,f.__data__,a,u)),i.push(f));return new G(r,i)}function Ar(t){return function(){return this.matches(t)}}function Ti(t){typeof t!="function"&&(t=Ar(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],u=o.length,s=r[i]=[],f,a=0;a<u;++a)(f=o[a])&&t.call(f,f.__data__,a,o)&&s.push(f);return new G(r,this._parents)}function br(t){return new Array(t.length)}function $i(){return new G(this._enter||this._groups.map(br),this._parents)}function dn(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}dn.prototype={constructor:dn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ii(t){return function(){return t}}var $e="$";function Oi(t,n,e,r,i,o){for(var u=0,s,f=n.length,a=o.length;u<a;++u)(s=n[u])?(s.__data__=o[u],r[u]=s):e[u]=new dn(t,o[u]);for(;u<f;++u)(s=n[u])&&(i[u]=s)}function Fi(t,n,e,r,i,o,u){var s,f,a={},l=n.length,c=o.length,h=new Array(l),p;for(s=0;s<l;++s)(f=n[s])&&(h[s]=p=$e+u.call(f,f.__data__,s,n),p in a?i[s]=f:a[p]=f);for(s=0;s<c;++s)p=$e+u.call(t,o[s],s,o),(f=a[p])?(r[s]=f,f.__data__=o[s],a[p]=null):e[s]=new dn(t,o[s]);for(s=0;s<l;++s)(f=n[s])&&a[h[s]]===f&&(i[s]=f)}function Hi(t,n){if(!t)return p=new Array(this.size()),a=-1,this.each(function(E){p[++a]=E}),p;var e=n?Fi:Oi,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ii(t));for(var o=i.length,u=new Array(o),s=new Array(o),f=new Array(o),a=0;a<o;++a){var l=r[a],c=i[a],h=c.length,p=t.call(l,l&&l.__data__,a,r),v=p.length,g=s[a]=new Array(v),d=u[a]=new Array(v),m=f[a]=new Array(h);e(l,c,g,d,m,p,n);for(var y=0,w=0,x,S;y<v;++y)if(x=g[y]){for(y>=w&&(w=y+1);!(S=d[w])&&++w<v;);x._next=S||null}}return u=new G(u,r),u._enter=s,u._exit=f,u}function qi(){return new G(this._exit||this._groups.map(br),this._parents)}function Ui(t,n,e){var r=this.enter(),i=this,o=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),n!=null&&(i=n(i)),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function Xi(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),s=0;s<o;++s)for(var f=n[s],a=e[s],l=f.length,c=u[s]=new Array(l),h,p=0;p<l;++p)(h=f[p]||a[p])&&(c[p]=h);for(;s<r;++s)u[s]=n[s];return new G(u,this._parents)}function Bi(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],u;--i>=0;)(u=r[i])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function Di(t){t||(t=zi);function n(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u=e[o],s=u.length,f=i[o]=new Array(s),a,l=0;l<s;++l)(a=u[l])&&(f[l]=a);f.sort(n)}return new G(i,this._parents).order()}function zi(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Yi(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Vi(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t}function Gi(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null}function Zi(){var t=0;return this.each(function(){++t}),t}function Ki(){return!this.node()}function Wi(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,u=i.length,s;o<u;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Ji(t){return function(){this.removeAttribute(t)}}function Qi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ji(t,n){return function(){this.setAttribute(t,n)}}function to(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function no(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function eo(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function ro(t,n){var e=$n(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Qi:Ji:typeof n=="function"?e.local?eo:no:e.local?to:ji)(e,n))}function Pr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function io(t){return function(){this.style.removeProperty(t)}}function oo(t,n,e){return function(){this.style.setProperty(t,n,e)}}function uo(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function so(t,n,e){return arguments.length>1?this.each((n==null?io:typeof n=="function"?uo:oo)(t,n,e??"")):Rt(this.node(),t)}function Rt(t,n){return t.style.getPropertyValue(n)||Pr(t).getComputedStyle(t,null).getPropertyValue(n)}function lo(t){return function(){delete this[t]}}function fo(t,n){return function(){this[t]=n}}function ao(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function co(t,n){return arguments.length>1?this.each((n==null?lo:typeof n=="function"?ao:fo)(t,n)):this.node()[t]}function Lr(t){return t.trim().split(/^|\s+/)}function Ne(t){return t.classList||new kr(t)}function kr(t){this._node=t,this._names=Lr(t.getAttribute("class")||"")}kr.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Tr(t,n){for(var e=Ne(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function $r(t,n){for(var e=Ne(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function ho(t){return function(){Tr(this,t)}}function po(t){return function(){$r(this,t)}}function go(t,n){return function(){(n.apply(this,arguments)?Tr:$r)(this,t)}}function vo(t,n){var e=Lr(t+"");if(arguments.length<2){for(var r=Ne(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?go:n?ho:po)(e,n))}function _o(){this.textContent=""}function yo(t){return function(){this.textContent=t}}function wo(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function mo(t){return arguments.length?this.each(t==null?_o:(typeof t=="function"?wo:yo)(t)):this.node().textContent}function xo(){this.innerHTML=""}function So(t){return function(){this.innerHTML=t}}function Eo(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function No(t){return arguments.length?this.each(t==null?xo:(typeof t=="function"?Eo:So)(t)):this.node().innerHTML}function Ro(){this.nextSibling&&this.parentNode.appendChild(this)}function Co(){return this.each(Ro)}function Mo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ao(){return this.each(Mo)}function bo(t){var n=typeof t=="function"?t:Cr(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Po(){return null}function Lo(t,n){var e=typeof t=="function"?t:Cr(t),r=n==null?Po:typeof n=="function"?n:Ee(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function ko(){var t=this.parentNode;t&&t.removeChild(this)}function To(){return this.each(ko)}function $o(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Io(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Oo(t){return this.select(t?Io:$o)}function Fo(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Ir={},Vt=null;if(typeof document<"u"){var Ho=document.documentElement;"onmouseenter"in Ho||(Ir={mouseenter:"mouseover",mouseleave:"mouseout"})}function qo(t,n,e){return t=Or(t,n,e),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function Or(t,n,e){return function(r){var i=Vt;Vt=r;try{t.call(this,this.__data__,n,e)}finally{Vt=i}}}function Uo(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function Xo(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.capture):n[++r]=o;++r?n.length=r:delete this.__on}}}function Bo(t,n,e){var r=Ir.hasOwnProperty(t.type)?qo:Or;return function(i,o,u){var s=this.__on,f,a=r(n,o,u);if(s){for(var l=0,c=s.length;l<c;++l)if((f=s[l]).type===t.type&&f.name===t.name){this.removeEventListener(f.type,f.listener,f.capture),this.addEventListener(f.type,f.listener=a,f.capture=e),f.value=n;return}}this.addEventListener(t.type,a,e),f={type:t.type,name:t.name,value:n,listener:a,capture:e},s?s.push(f):this.__on=[f]}}function Do(t,n,e){var r=Uo(t+""),i,o=r.length,u;if(arguments.length<2){var s=this.node().__on;if(s){for(var f=0,a=s.length,l;f<a;++f)for(i=0,l=s[f];i<o;++i)if((u=r[i]).type===l.type&&u.name===l.name)return l.value}return}for(s=n?Bo:Xo,e==null&&(e=!1),i=0;i<o;++i)this.each(s(r[i],n,e));return this}function Fr(t,n,e){var r=Pr(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function zo(t,n){return function(){return Fr(this,t,n)}}function Yo(t,n){return function(){return Fr(this,t,n.apply(this,arguments))}}function Vo(t,n){return this.each((typeof n=="function"?Yo:zo)(t,n))}var Hr=[null];function G(t,n){this._groups=t,this._parents=n}function nn(){return new G([[document.documentElement]],Hr)}G.prototype=nn.prototype={constructor:G,select:Pi,selectAll:ki,filter:Ti,data:Hi,enter:$i,exit:qi,join:Ui,merge:Xi,order:Bi,sort:Di,call:Yi,nodes:Vi,node:Gi,size:Zi,empty:Ki,each:Wi,attr:ro,style:so,property:co,classed:vo,text:mo,html:No,raise:Co,lower:Ao,append:bo,insert:Lo,remove:To,clone:Oo,datum:Fo,on:Do,dispatch:Vo};function pt(t){return typeof t=="string"?new G([[document.querySelector(t)]],[document.documentElement]):new G([[t]],Hr)}function Re(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function qr(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function en(){}var Gt=.7,_n=1/Gt,St="\\s*([+-]?\\d+)\\s*",Zt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Go=/^#([0-9a-f]{3,8})$/,Zo=new RegExp("^rgb\\("+[St,St,St]+"\\)$"),Ko=new RegExp("^rgb\\("+[rt,rt,rt]+"\\)$"),Wo=new RegExp("^rgba\\("+[St,St,St,Zt]+"\\)$"),Jo=new RegExp("^rgba\\("+[rt,rt,rt,Zt]+"\\)$"),Qo=new RegExp("^hsl\\("+[Zt,rt,rt]+"\\)$"),jo=new RegExp("^hsla\\("+[Zt,rt,rt,Zt]+"\\)$"),Ie={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Re(en,Kt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Oe,formatHex:Oe,formatHsl:tu,formatRgb:Fe,toString:Fe});function Oe(){return this.rgb().formatHex()}function tu(){return Ur(this).formatHsl()}function Fe(){return this.rgb().formatRgb()}function Kt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Go.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?He(n):e===3?new V(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?on(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?on(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Zo.exec(t))?new V(n[1],n[2],n[3],1):(n=Ko.exec(t))?new V(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Wo.exec(t))?on(n[1],n[2],n[3],n[4]):(n=Jo.exec(t))?on(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Qo.exec(t))?Xe(n[1],n[2]/100,n[3]/100,1):(n=jo.exec(t))?Xe(n[1],n[2]/100,n[3]/100,n[4]):Ie.hasOwnProperty(t)?He(Ie[t]):t==="transparent"?new V(NaN,NaN,NaN,0):null}function He(t){return new V(t>>16&255,t>>8&255,t&255,1)}function on(t,n,e,r){return r<=0&&(t=n=e=NaN),new V(t,n,e,r)}function nu(t){return t instanceof en||(t=Kt(t)),t?(t=t.rgb(),new V(t.r,t.g,t.b,t.opacity)):new V}function jn(t,n,e,r){return arguments.length===1?nu(t):new V(t,n,e,r??1)}function V(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}Re(V,jn,qr(en,{brighter:function(t){return t=t==null?_n:Math.pow(_n,t),new V(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Gt:Math.pow(Gt,t),new V(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qe,formatHex:qe,formatRgb:Ue,toString:Ue}));function qe(){return"#"+Un(this.r)+Un(this.g)+Un(this.b)}function Ue(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Un(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Xe(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new tt(t,n,e,r)}function Ur(t){if(t instanceof tt)return new tt(t.h,t.s,t.l,t.opacity);if(t instanceof en||(t=Kt(t)),!t)return new tt;if(t instanceof tt)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,s=o-i,f=(o+i)/2;return s?(n===o?u=(e-r)/s+(e<r)*6:e===o?u=(r-n)/s+2:u=(n-e)/s+4,s/=f<.5?o+i:2-o-i,u*=60):s=f>0&&f<1?0:u,new tt(u,s,f,t.opacity)}function eu(t,n,e,r){return arguments.length===1?Ur(t):new tt(t,n,e,r??1)}function tt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}Re(tt,eu,qr(en,{brighter:function(t){return t=t==null?_n:Math.pow(_n,t),new tt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Gt:Math.pow(Gt,t),new tt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new V(Xn(t>=240?t-240:t+120,i,r),Xn(t,i,r),Xn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Xn(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}function Xr(t){return function(){return t}}function ru(t,n){return function(e){return t+e*n}}function iu(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function ou(t){return(t=+t)==1?Br:function(n,e){return e-n?iu(n,e,t):Xr(isNaN(n)?e:n)}}function Br(t,n){var e=n-t;return e?ru(t,e):Xr(isNaN(t)?n:t)}const Be=function t(n){var e=ou(n);function r(i,o){var u=e((i=jn(i)).r,(o=jn(o)).r),s=e(i.g,o.g),f=e(i.b,o.b),a=Br(i.opacity,o.opacity);return function(l){return i.r=u(l),i.g=s(l),i.b=f(l),i.opacity=a(l),i+""}}return r.gamma=t,r}(1);function lt(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var te=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bn=new RegExp(te.source,"g");function uu(t){return function(){return t}}function su(t){return function(n){return t(n)+""}}function lu(t,n){var e=te.lastIndex=Bn.lastIndex=0,r,i,o,u=-1,s=[],f=[];for(t=t+"",n=n+"";(r=te.exec(t))&&(i=Bn.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),s[u]?s[u]+=o:s[++u]=o),(r=r[0])===(i=i[0])?s[u]?s[u]+=i:s[++u]=i:(s[++u]=null,f.push({i:u,x:lt(r,i)})),e=Bn.lastIndex;return e<n.length&&(o=n.slice(e),s[u]?s[u]+=o:s[++u]=o),s.length<2?f[0]?su(f[0].x):uu(n):(n=f.length,function(a){for(var l=0,c;l<n;++l)s[(c=f[l]).i]=c.x(a);return s.join("")})}var De=180/Math.PI,ne={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dr(t,n,e,r,i,o){var u,s,f;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(f=t*e+n*r)&&(e-=t*f,r-=n*f),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,f/=s),t*r<n*e&&(t=-t,n=-n,f=-f,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*De,skewX:Math.atan(f)*De,scaleX:u,scaleY:s}}var Lt,Dn,ze,un;function fu(t){return t==="none"?ne:(Lt||(Lt=document.createElement("DIV"),Dn=document.documentElement,ze=document.defaultView),Lt.style.transform=t,t=ze.getComputedStyle(Dn.appendChild(Lt),null).getPropertyValue("transform"),Dn.removeChild(Lt),t=t.slice(7,-1).split(","),Dr(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function au(t){return t==null||(un||(un=document.createElementNS("http://www.w3.org/2000/svg","g")),un.setAttribute("transform",t),!(t=un.transform.baseVal.consolidate()))?ne:(t=t.matrix,Dr(t.a,t.b,t.c,t.d,t.e,t.f))}function zr(t,n,e,r){function i(a){return a.length?a.pop()+" ":""}function o(a,l,c,h,p,v){if(a!==c||l!==h){var g=p.push("translate(",null,n,null,e);v.push({i:g-4,x:lt(a,c)},{i:g-2,x:lt(l,h)})}else(c||h)&&p.push("translate("+c+n+h+e)}function u(a,l,c,h){a!==l?(a-l>180?l+=360:l-a>180&&(a+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:lt(a,l)})):l&&c.push(i(c)+"rotate("+l+r)}function s(a,l,c,h){a!==l?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:lt(a,l)}):l&&c.push(i(c)+"skewX("+l+r)}function f(a,l,c,h,p,v){if(a!==c||l!==h){var g=p.push(i(p)+"scale(",null,",",null,")");v.push({i:g-4,x:lt(a,c)},{i:g-2,x:lt(l,h)})}else(c!==1||h!==1)&&p.push(i(p)+"scale("+c+","+h+")")}return function(a,l){var c=[],h=[];return a=t(a),l=t(l),o(a.translateX,a.translateY,l.translateX,l.translateY,c,h),u(a.rotate,l.rotate,c,h),s(a.skewX,l.skewX,c,h),f(a.scaleX,a.scaleY,l.scaleX,l.scaleY,c,h),a=l=null,function(p){for(var v=-1,g=h.length,d;++v<g;)c[(d=h[v]).i]=d.x(p);return c.join("")}}}var cu=zr(fu,"px, ","px)","deg)"),hu=zr(au,", ",")",")"),Ct=0,Ot=0,kt=0,Yr=1e3,yn,Ft,wn=0,gt=0,In=0,Wt=typeof performance=="object"&&performance.now?performance:Date,Vr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function On(){return gt||(Vr(pu),gt=Wt.now()+In)}function pu(){gt=0}function mn(){this._call=this._time=this._next=null}mn.prototype=Gr.prototype={constructor:mn,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?On():+e)+(n==null?0:+n),!this._next&&Ft!==this&&(Ft?Ft._next=this:yn=this,Ft=this),this._call=t,this._time=e,ee()},stop:function(){this._call&&(this._call=null,this._time=1/0,ee())}};function Gr(t,n,e){var r=new mn;return r.restart(t,n,e),r}function gu(){On(),++Ct;for(var t=yn,n;t;)(n=gt-t._time)>=0&&t._call.call(null,n),t=t._next;--Ct}function Ye(){gt=(wn=Wt.now())+In,Ct=Ot=0;try{gu()}finally{Ct=0,du(),gt=0}}function vu(){var t=Wt.now(),n=t-wn;n>Yr&&(In-=n,wn=t)}function du(){for(var t,n=yn,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:yn=e);Ft=t,ee(r)}function ee(t){if(!Ct){Ot&&(Ot=clearTimeout(Ot));var n=t-gt;n>24?(t<1/0&&(Ot=setTimeout(Ye,t-Wt.now()-In)),kt&&(kt=clearInterval(kt))):(kt||(wn=Wt.now(),kt=setInterval(vu,Yr)),Ct=1,Vr(Ye))}}function Ve(t,n,e){var r=new mn;return n=n==null?0:+n,r.restart(function(i){r.stop(),t(i+n)},n,e),r}var _u=Rr("start","end","cancel","interrupt"),yu=[],Zr=0,Ge=1,re=2,pn=3,Ze=4,ie=5,gn=6;function Fn(t,n,e,r,i,o){var u=t.__transition;if(!u)t.__transition={};else if(e in u)return;wu(t,e,{name:n,index:r,group:i,on:_u,tween:yu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Zr})}function Ce(t,n){var e=j(t,n);if(e.state>Zr)throw new Error("too late; already scheduled");return e}function st(t,n){var e=j(t,n);if(e.state>pn)throw new Error("too late; already running");return e}function j(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function wu(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=Gr(o,0,e.time);function o(a){e.state=Ge,e.timer.restart(u,e.delay,e.time),e.delay<=a&&u(a-e.delay)}function u(a){var l,c,h,p;if(e.state!==Ge)return f();for(l in r)if(p=r[l],p.name===e.name){if(p.state===pn)return Ve(u);p.state===Ze?(p.state=gn,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[l]):+l<n&&(p.state=gn,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[l])}if(Ve(function(){e.state===pn&&(e.state=Ze,e.timer.restart(s,e.delay,e.time),s(a))}),e.state=re,e.on.call("start",t,t.__data__,e.index,e.group),e.state===re){for(e.state=pn,i=new Array(h=e.tween.length),l=0,c=-1;l<h;++l)(p=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(i[++c]=p);i.length=c+1}}function s(a){for(var l=a<e.duration?e.ease.call(null,a/e.duration):(e.timer.restart(f),e.state=ie,1),c=-1,h=i.length;++c<h;)i[c].call(t,l);e.state===ie&&(e.on.call("end",t,t.__data__,e.index,e.group),f())}function f(){e.state=gn,e.timer.stop(),delete r[n];for(var a in r)return;delete t.__transition}}function mu(t,n){var e=t.__transition,r,i,o=!0,u;if(e){n=n==null?null:n+"";for(u in e){if((r=e[u]).name!==n){o=!1;continue}i=r.state>re&&r.state<ie,r.state=gn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[u]}o&&delete t.__transition}}function xu(t){return this.each(function(){mu(this,t)})}function Su(t,n){var e,r;return function(){var i=st(this,t),o=i.tween;if(o!==e){r=e=o;for(var u=0,s=r.length;u<s;++u)if(r[u].name===n){r=r.slice(),r.splice(u,1);break}}i.tween=r}}function Eu(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=st(this,t),u=o.tween;if(u!==r){i=(r=u).slice();for(var s={name:n,value:e},f=0,a=i.length;f<a;++f)if(i[f].name===n){i[f]=s;break}f===a&&i.push(s)}o.tween=i}}function Nu(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=j(this.node(),e).tween,i=0,o=r.length,u;i<o;++i)if((u=r[i]).name===t)return u.value;return null}return this.each((n==null?Su:Eu)(e,t,n))}function Me(t,n,e){var r=t._id;return t.each(function(){var i=st(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return j(i,r).value[n]}}function Kr(t,n){var e;return(typeof n=="number"?lt:n instanceof Kt?Be:(e=Kt(n))?(n=e,Be):lu)(t,n)}function Ru(t){return function(){this.removeAttribute(t)}}function Cu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mu(t,n,e){var r,i=e+"",o;return function(){var u=this.getAttribute(t);return u===i?null:u===r?o:o=n(r=u,e)}}function Au(t,n,e){var r,i=e+"",o;return function(){var u=this.getAttributeNS(t.space,t.local);return u===i?null:u===r?o:o=n(r=u,e)}}function bu(t,n,e){var r,i,o;return function(){var u,s=e(this),f;return s==null?void this.removeAttribute(t):(u=this.getAttribute(t),f=s+"",u===f?null:u===r&&f===i?o:(i=f,o=n(r=u,s)))}}function Pu(t,n,e){var r,i,o;return function(){var u,s=e(this),f;return s==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),f=s+"",u===f?null:u===r&&f===i?o:(i=f,o=n(r=u,s)))}}function Lu(t,n){var e=$n(t),r=e==="transform"?hu:Kr;return this.attrTween(t,typeof n=="function"?(e.local?Pu:bu)(e,r,Me(this,"attr."+t,n)):n==null?(e.local?Cu:Ru)(e):(e.local?Au:Mu)(e,r,n))}function ku(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Tu(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function $u(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&Tu(t,o)),e}return i._value=n,i}function Iu(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&ku(t,o)),e}return i._value=n,i}function Ou(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=$n(t);return this.tween(e,(r.local?$u:Iu)(r,n))}function Fu(t,n){return function(){Ce(this,t).delay=+n.apply(this,arguments)}}function Hu(t,n){return n=+n,function(){Ce(this,t).delay=n}}function qu(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Fu:Hu)(n,t)):j(this.node(),n).delay}function Uu(t,n){return function(){st(this,t).duration=+n.apply(this,arguments)}}function Xu(t,n){return n=+n,function(){st(this,t).duration=n}}function Bu(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Uu:Xu)(n,t)):j(this.node(),n).duration}function Du(t,n){if(typeof n!="function")throw new Error;return function(){st(this,t).ease=n}}function zu(t){var n=this._id;return arguments.length?this.each(Du(n,t)):j(this.node(),n).ease}function Yu(t){typeof t!="function"&&(t=Ar(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],u=o.length,s=r[i]=[],f,a=0;a<u;++a)(f=o[a])&&t.call(f,f.__data__,a,o)&&s.push(f);return new ut(r,this._parents,this._name,this._id)}function Vu(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),s=0;s<o;++s)for(var f=n[s],a=e[s],l=f.length,c=u[s]=new Array(l),h,p=0;p<l;++p)(h=f[p]||a[p])&&(c[p]=h);for(;s<r;++s)u[s]=n[s];return new ut(u,this._parents,this._name,this._id)}function Gu(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function Zu(t,n,e){var r,i,o=Gu(n)?Ce:st;return function(){var u=o(this,t),s=u.on;s!==r&&(i=(r=s).copy()).on(n,e),u.on=i}}function Ku(t,n){var e=this._id;return arguments.length<2?j(this.node(),e).on.on(t):this.each(Zu(e,t,n))}function Wu(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Ju(){return this.on("end.remove",Wu(this._id))}function Qu(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Ee(t));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var s=r[u],f=s.length,a=o[u]=new Array(f),l,c,h=0;h<f;++h)(l=s[h])&&(c=t.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),a[h]=c,Fn(a[h],n,e,h,a,j(l,e)));return new ut(o,this._parents,n,e)}function ju(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Mr(t));for(var r=this._groups,i=r.length,o=[],u=[],s=0;s<i;++s)for(var f=r[s],a=f.length,l,c=0;c<a;++c)if(l=f[c]){for(var h=t.call(l,l.__data__,c,f),p,v=j(l,e),g=0,d=h.length;g<d;++g)(p=h[g])&&Fn(p,n,e,g,h,v);o.push(h),u.push(l)}return new ut(o,u,n,e)}var ts=nn.prototype.constructor;function ns(){return new ts(this._groups,this._parents)}function es(t,n){var e,r,i;return function(){var o=Rt(this,t),u=(this.style.removeProperty(t),Rt(this,t));return o===u?null:o===e&&u===r?i:i=n(e=o,r=u)}}function Wr(t){return function(){this.style.removeProperty(t)}}function rs(t,n,e){var r,i=e+"",o;return function(){var u=Rt(this,t);return u===i?null:u===r?o:o=n(r=u,e)}}function is(t,n,e){var r,i,o;return function(){var u=Rt(this,t),s=e(this),f=s+"";return s==null&&(f=s=(this.style.removeProperty(t),Rt(this,t))),u===f?null:u===r&&f===i?o:(i=f,o=n(r=u,s))}}function os(t,n){var e,r,i,o="style."+n,u="end."+o,s;return function(){var f=st(this,t),a=f.on,l=f.value[o]==null?s||(s=Wr(n)):void 0;(a!==e||i!==l)&&(r=(e=a).copy()).on(u,i=l),f.on=r}}function us(t,n,e){var r=(t+="")=="transform"?cu:Kr;return n==null?this.styleTween(t,es(t,r)).on("end.style."+t,Wr(t)):typeof n=="function"?this.styleTween(t,is(t,r,Me(this,"style."+t,n))).each(os(this._id,t)):this.styleTween(t,rs(t,r,n),e).on("end.style."+t,null)}function ss(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function ls(t,n,e){var r,i;function o(){var u=n.apply(this,arguments);return u!==i&&(r=(i=u)&&ss(t,u,e)),r}return o._value=n,o}function fs(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,ls(t,n,e??""))}function as(t){return function(){this.textContent=t}}function cs(t){return function(){var n=t(this);this.textContent=n??""}}function hs(t){return this.tween("text",typeof t=="function"?cs(Me(this,"text",t)):as(t==null?"":t+""))}function ps(t){return function(n){this.textContent=t.call(this,n)}}function gs(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&ps(i)),n}return r._value=t,r}function vs(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,gs(t))}function ds(){for(var t=this._name,n=this._id,e=Jr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u=r[o],s=u.length,f,a=0;a<s;++a)if(f=u[a]){var l=j(f,n);Fn(f,t,e,a,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ut(r,this._parents,t,e)}function _s(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,u){var s={value:u},f={value:function(){--i===0&&o()}};e.each(function(){var a=st(this,r),l=a.on;l!==t&&(n=(t=l).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(f)),a.on=n})})}var ys=0;function ut(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Jr(){return++ys}var yt=nn.prototype;ut.prototype={constructor:ut,select:Qu,selectAll:ju,filter:Yu,merge:Vu,selection:ns,transition:ds,call:yt.call,nodes:yt.nodes,node:yt.node,size:yt.size,empty:yt.empty,each:yt.each,on:Ku,attr:Lu,attrTween:Ou,style:us,styleTween:fs,text:hs,textTween:vs,remove:Ju,tween:Nu,delay:qu,duration:Bu,ease:zu,end:_s};function ws(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var oe={time:null,delay:0,duration:250,ease:ws};function ms(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return oe.time=On(),oe;return e}function xs(t){var n,e;t instanceof ut?(n=t._id,t=t._name):(n=Jr(),(e=oe).time=On(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u=r[o],s=u.length,f,a=0;a<s;++a)(f=u[a])&&Fn(f,t,n,a,u,e||ms(f,n));return new ut(r,this._parents,t,n)}nn.prototype.interrupt=xu;nn.prototype.transition=xs;var W="$";function xn(){}xn.prototype=Qr.prototype={constructor:xn,has:function(t){return W+t in this},get:function(t){return this[W+t]},set:function(t,n){return this[W+t]=n,this},remove:function(t){var n=W+t;return n in this&&delete this[n]},clear:function(){for(var t in this)t[0]===W&&delete this[t]},keys:function(){var t=[];for(var n in this)n[0]===W&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)n[0]===W&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)n[0]===W&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)n[0]===W&&++t;return t},empty:function(){for(var t in this)if(t[0]===W)return!1;return!0},each:function(t){for(var n in this)n[0]===W&&t(this[n],n.slice(1),this)}};function Qr(t,n){var e=new xn;if(t instanceof xn)t.each(function(s,f){e.set(f,s)});else if(Array.isArray(t)){var r=-1,i=t.length,o;if(n==null)for(;++r<i;)e.set(r,t[r]);else for(;++r<i;)e.set(n(o=t[r],r,t),o)}else if(t)for(var u in t)e.set(u,t[u]);return e}function Ke(){}var ht=Qr.prototype;Ke.prototype={constructor:Ke,has:ht.has,add:function(t){return t+="",this[W+t]=t,this},remove:ht.remove,clear:ht.clear,values:ht.keys,size:ht.size,empty:ht.empty,each:ht.each};function Ss(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function jr(t,n){return fetch(t,n).then(Ss)}function Hn(){return new Sn}function Sn(){this.reset()}Sn.prototype={constructor:Sn,reset:function(){this.s=this.t=0},add:function(t){We(sn,t,this.t),We(this,sn.s,this.s),this.s?this.t+=sn.t:this.s=sn.t},valueOf:function(){return this.s}};var sn=new Sn;function We(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}var L=1e-6,C=Math.PI,D=C/2,Je=C/4,Z=C*2,z=180/C,F=C/180,$=Math.abs,ti=Math.atan,Jt=Math.atan2,I=Math.cos,Es=Math.exp,Ns=Math.log,O=Math.sin,Rs=Math.sign||function(t){return t>0?1:t<0?-1:0},dt=Math.sqrt,Cs=Math.tan;function Ms(t){return t>1?0:t<-1?C:Math.acos(t)}function Qt(t){return t>1?D:t<-1?-D:Math.asin(t)}function J(){}function En(t,n){t&&je.hasOwnProperty(t.type)&&je[t.type](t,n)}var Qe={Feature:function(t,n){En(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)En(e[r].geometry,n)}},je={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){ue(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)ue(e[r],n,0)},Polygon:function(t,n){tr(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)tr(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)En(e[r],n)}};function ue(t,n,e){var r=-1,i=t.length-e,o;for(n.lineStart();++r<i;)o=t[r],n.point(o[0],o[1],o[2]);n.lineEnd()}function tr(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)ue(t[e],n,1);n.polygonEnd()}function wt(t,n){t&&Qe.hasOwnProperty(t.type)?Qe[t.type](t,n):En(t,n)}function se(t){return[Jt(t[1],t[0]),Qt(t[2])]}function Mt(t){var n=t[0],e=t[1],r=I(e);return[r*I(n),r*O(n),O(e)]}function ln(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Nn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function zn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function fn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function le(t){var n=dt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function fe(t,n){function e(r,i){return r=t(r,i),n(r[0],r[1])}return t.invert&&n.invert&&(e.invert=function(r,i){return r=n.invert(r,i),r&&t.invert(r[0],r[1])}),e}function ae(t,n){return[$(t)>C?t+Math.round(-t/Z)*Z:t,n]}ae.invert=ae;function ni(t,n,e){return(t%=Z)?n||e?fe(er(t),rr(n,e)):er(t):n||e?rr(n,e):ae}function nr(t){return function(n,e){return n+=t,[n>C?n-Z:n<-C?n+Z:n,e]}}function er(t){var n=nr(t);return n.invert=nr(-t),n}function rr(t,n){var e=I(t),r=O(t),i=I(n),o=O(n);function u(s,f){var a=I(f),l=I(s)*a,c=O(s)*a,h=O(f),p=h*e+l*r;return[Jt(c*i-p*o,l*e-h*r),Qt(p*i+c*o)]}return u.invert=function(s,f){var a=I(f),l=I(s)*a,c=O(s)*a,h=O(f),p=h*i-c*o;return[Jt(c*i+h*o,l*e+p*r),Qt(p*e-l*r)]},u}function As(t){t=ni(t[0]*F,t[1]*F,t.length>2?t[2]*F:0);function n(e){return e=t(e[0]*F,e[1]*F),e[0]*=z,e[1]*=z,e}return n.invert=function(e){return e=t.invert(e[0]*F,e[1]*F),e[0]*=z,e[1]*=z,e},n}function bs(t,n,e,r,i,o){if(e){var u=I(n),s=O(n),f=r*e;i==null?(i=n+r*Z,o=n-f/2):(i=ir(u,i),o=ir(u,o),(r>0?i<o:i>o)&&(i+=r*Z));for(var a,l=i;r>0?l>o:l<o;l-=f)a=se([u,-s*I(l),-s*O(l)]),t.point(a[0],a[1])}}function ir(t,n){n=Mt(n),n[0]-=t,le(n);var e=Ms(-n[1]);return((-n[2]<0?-e:e)+Z-L)%Z}function ei(){var t=[],n;return{point:function(e,r,i){n.push([e,r,i])},lineStart:function(){t.push(n=[])},lineEnd:J,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function vn(t,n){return $(t[0]-n[0])<L&&$(t[1]-n[1])<L}function an(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function ri(t,n,e,r,i){var o=[],u=[],s,f;if(t.forEach(function(v){if(!((g=v.length-1)<=0)){var g,d=v[0],m=v[g],y;if(vn(d,m)){if(!d[2]&&!m[2]){for(i.lineStart(),s=0;s<g;++s)i.point((d=v[s])[0],d[1]);i.lineEnd();return}m[0]+=2*L}o.push(y=new an(d,v,null,!0)),u.push(y.o=new an(d,null,y,!1)),o.push(y=new an(m,v,null,!1)),u.push(y.o=new an(m,null,y,!0))}}),!!o.length){for(u.sort(n),or(o),or(u),s=0,f=u.length;s<f;++s)u[s].e=e=!e;for(var a=o[0],l,c;;){for(var h=a,p=!0;h.v;)if((h=h.n)===a)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(s=0,f=l.length;s<f;++s)i.point((c=l[s])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,s=l.length-1;s>=0;--s)i.point((c=l[s])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,p=!p}while(!h.v);i.lineEnd()}}}function or(t){if(n=t.length){for(var n,e=0,r=t[0],i;++e<n;)r.n=i=t[e],i.p=r,r=i;r.n=i=t[0],i.p=r}}var Yn=Hn();function Vn(t){return $(t[0])<=C?t[0]:Rs(t[0])*(($(t[0])+C)%Z-C)}function Ps(t,n){var e=Vn(n),r=n[1],i=O(r),o=[O(e),-I(e),0],u=0,s=0;Yn.reset(),i===1?r=D+L:i===-1&&(r=-D-L);for(var f=0,a=t.length;f<a;++f)if(c=(l=t[f]).length)for(var l,c,h=l[c-1],p=Vn(h),v=h[1]/2+Je,g=O(v),d=I(v),m=0;m<c;++m,p=w,g=S,d=E,h=y){var y=l[m],w=Vn(y),x=y[1]/2+Je,S=O(x),E=I(x),M=w-p,b=M>=0?1:-1,A=b*M,k=A>C,N=g*S;if(Yn.add(Jt(N*b*O(A),d*E+N*I(A))),u+=k?M+b*Z:M,k^p>=e^w>=e){var U=Nn(Mt(h),Mt(y));le(U);var H=Nn(o,U);le(H);var P=(k^M>=0?-1:1)*Qt(H[2]);(r>P||r===P&&(U[0]||U[1]))&&(s+=k^M>=0?1:-1)}}return(u<-L||u<L&&Yn<-L)^s&1}function ii(t,n,e,r){return function(i){var o=n(i),u=ei(),s=n(u),f=!1,a,l,c,h={point:p,lineStart:g,lineEnd:d,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=w,l=[],a=[]},polygonEnd:function(){h.point=p,h.lineStart=g,h.lineEnd=d,l=Nr(l);var x=Ps(a,r);l.length?(f||(i.polygonStart(),f=!0),ri(l,ks,x,e,i)):x&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),l=a=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(x,S){t(x,S)&&i.point(x,S)}function v(x,S){o.point(x,S)}function g(){h.point=v,o.lineStart()}function d(){h.point=p,o.lineEnd()}function m(x,S){c.push([x,S]),s.point(x,S)}function y(){s.lineStart(),c=[]}function w(){m(c[0][0],c[0][1]),s.lineEnd();var x=s.clean(),S=u.result(),E,M=S.length,b,A,k;if(c.pop(),a.push(c),c=null,!!M){if(x&1){if(A=S[0],(b=A.length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),E=0;E<b;++E)i.point((k=A[E])[0],k[1]);i.lineEnd()}return}M>1&&x&2&&S.push(S.pop().concat(S.shift())),l.push(S.filter(Ls))}}return h}}function Ls(t){return t.length>1}function ks(t,n){return((t=t.x)[0]<0?t[1]-D-L:D-t[1])-((n=n.x)[0]<0?n[1]-D-L:D-n[1])}const ur=ii(function(){return!0},Ts,Is,[-C,-D]);function Ts(t){var n=NaN,e=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,u){var s=o>0?C:-C,f=$(o-n);$(f-C)<L?(t.point(n,e=(e+u)/2>0?D:-D),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(s,e),t.point(o,e),i=0):r!==s&&f>=C&&($(n-r)<L&&(n-=r*L),$(o-s)<L&&(o-=s*L),e=$s(n,e,o,u),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(s,e),i=0),t.point(n=o,e=u),r=s},lineEnd:function(){t.lineEnd(),n=e=NaN},clean:function(){return 2-i}}}function $s(t,n,e,r){var i,o,u=O(t-e);return $(u)>L?ti((O(n)*(o=I(r))*O(e)-O(r)*(i=I(n))*O(t))/(i*o*u)):(n+r)/2}function Is(t,n,e,r){var i;if(t==null)i=e*D,r.point(-C,i),r.point(0,i),r.point(C,i),r.point(C,0),r.point(C,-i),r.point(0,-i),r.point(-C,-i),r.point(-C,0),r.point(-C,i);else if($(t[0]-n[0])>L){var o=t[0]<n[0]?C:-C;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Os(t){var n=I(t),e=6*F,r=n>0,i=$(n)>L;function o(l,c,h,p){bs(p,t,e,h,l,c)}function u(l,c){return I(l)*I(c)>n}function s(l){var c,h,p,v,g;return{lineStart:function(){v=p=!1,g=1},point:function(d,m){var y=[d,m],w,x=u(d,m),S=r?x?0:a(d,m):x?a(d+(d<0?C:-C),m):0;if(!c&&(v=p=x)&&l.lineStart(),x!==p&&(w=f(c,y),(!w||vn(c,w)||vn(y,w))&&(y[2]=1)),x!==p)g=0,x?(l.lineStart(),w=f(y,c),l.point(w[0],w[1])):(w=f(c,y),l.point(w[0],w[1],2),l.lineEnd()),c=w;else if(i&&c&&r^x){var E;!(S&h)&&(E=f(y,c,!0))&&(g=0,r?(l.lineStart(),l.point(E[0][0],E[0][1]),l.point(E[1][0],E[1][1]),l.lineEnd()):(l.point(E[1][0],E[1][1]),l.lineEnd(),l.lineStart(),l.point(E[0][0],E[0][1],3)))}x&&(!c||!vn(c,y))&&l.point(y[0],y[1]),c=y,p=x,h=S},lineEnd:function(){p&&l.lineEnd(),c=null},clean:function(){return g|(v&&p)<<1}}}function f(l,c,h){var p=Mt(l),v=Mt(c),g=[1,0,0],d=Nn(p,v),m=ln(d,d),y=d[0],w=m-y*y;if(!w)return!h&&l;var x=n*m/w,S=-n*y/w,E=Nn(g,d),M=fn(g,x),b=fn(d,S);zn(M,b);var A=E,k=ln(M,A),N=ln(A,A),U=k*k-N*(ln(M,M)-1);if(!(U<0)){var H=dt(U),P=fn(A,(-k-H)/N);if(zn(P,M),P=se(P),!h)return P;var _=l[0],R=c[0],q=l[1],B=c[1],K;R<_&&(K=_,_=R,R=K);var Pt=R-_,it=$(Pt-C)<L,ct=it||Pt<L;if(!it&&B<q&&(K=q,q=B,B=K),ct?it?q+B>0^P[1]<($(P[0]-_)<L?q:B):q<=P[1]&&P[1]<=B:Pt>C^(_<=P[0]&&P[0]<=R)){var ot=fn(A,(-k+H)/N);return zn(ot,M),[P,se(ot)]}}}function a(l,c){var h=r?t:C-t,p=0;return l<-h?p|=1:l>h&&(p|=2),c<-h?p|=4:c>h&&(p|=8),p}return ii(u,s,o,r?[0,-t]:[-C,t-C])}function Fs(t,n,e,r,i,o){var u=t[0],s=t[1],f=n[0],a=n[1],l=0,c=1,h=f-u,p=a-s,v;if(v=e-u,!(!h&&v>0)){if(v/=h,h<0){if(v<l)return;v<c&&(c=v)}else if(h>0){if(v>c)return;v>l&&(l=v)}if(v=i-u,!(!h&&v<0)){if(v/=h,h<0){if(v>c)return;v>l&&(l=v)}else if(h>0){if(v<l)return;v<c&&(c=v)}if(v=r-s,!(!p&&v>0)){if(v/=p,p<0){if(v<l)return;v<c&&(c=v)}else if(p>0){if(v>c)return;v>l&&(l=v)}if(v=o-s,!(!p&&v<0)){if(v/=p,p<0){if(v>c)return;v>l&&(l=v)}else if(p>0){if(v<l)return;v<c&&(c=v)}return l>0&&(t[0]=u+l*h,t[1]=s+l*p),c<1&&(n[0]=u+c*h,n[1]=s+c*p),!0}}}}}var Ht=1e9,cn=-Ht;function Hs(t,n,e,r){function i(a,l){return t<=a&&a<=e&&n<=l&&l<=r}function o(a,l,c,h){var p=0,v=0;if(a==null||(p=u(a,c))!==(v=u(l,c))||f(a,l)<0^c>0)do h.point(p===0||p===3?t:e,p>1?r:n);while((p=(p+c+4)%4)!==v);else h.point(l[0],l[1])}function u(a,l){return $(a[0]-t)<L?l>0?0:3:$(a[0]-e)<L?l>0?2:1:$(a[1]-n)<L?l>0?1:0:l>0?3:2}function s(a,l){return f(a.x,l.x)}function f(a,l){var c=u(a,1),h=u(l,1);return c!==h?c-h:c===0?l[1]-a[1]:c===1?a[0]-l[0]:c===2?a[1]-l[1]:l[0]-a[0]}return function(a){var l=a,c=ei(),h,p,v,g,d,m,y,w,x,S,E,M={point:b,lineStart:U,lineEnd:H,polygonStart:k,polygonEnd:N};function b(_,R){i(_,R)&&l.point(_,R)}function A(){for(var _=0,R=0,q=p.length;R<q;++R)for(var B=p[R],K=1,Pt=B.length,it=B[0],ct,ot,rn=it[0],_t=it[1];K<Pt;++K)ct=rn,ot=_t,it=B[K],rn=it[0],_t=it[1],ot<=r?_t>r&&(rn-ct)*(r-ot)>(_t-ot)*(t-ct)&&++_:_t<=r&&(rn-ct)*(r-ot)<(_t-ot)*(t-ct)&&--_;return _}function k(){l=c,h=[],p=[],E=!0}function N(){var _=A(),R=E&&_,q=(h=Nr(h)).length;(R||q)&&(a.polygonStart(),R&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),q&&ri(h,s,_,o,a),a.polygonEnd()),l=a,h=p=v=null}function U(){M.point=P,p&&p.push(v=[]),S=!0,x=!1,y=w=NaN}function H(){h&&(P(g,d),m&&x&&c.rejoin(),h.push(c.result())),M.point=b,x&&l.lineEnd()}function P(_,R){var q=i(_,R);if(p&&v.push([_,R]),S)g=_,d=R,m=q,S=!1,q&&(l.lineStart(),l.point(_,R));else if(q&&x)l.point(_,R);else{var B=[y=Math.max(cn,Math.min(Ht,y)),w=Math.max(cn,Math.min(Ht,w))],K=[_=Math.max(cn,Math.min(Ht,_)),R=Math.max(cn,Math.min(Ht,R))];Fs(B,K,t,n,e,r)?(x||(l.lineStart(),l.point(B[0],B[1])),l.point(K[0],K[1]),q||l.lineEnd(),E=!1):q&&(l.lineStart(),l.point(_,R),E=!1)}y=_,w=R,x=q}return M}}function ce(t){return t}var Gn=Hn(),he=Hn(),oi,ui,pe,ge,ft={point:J,lineStart:J,lineEnd:J,polygonStart:function(){ft.lineStart=qs,ft.lineEnd=Xs},polygonEnd:function(){ft.lineStart=ft.lineEnd=ft.point=J,Gn.add($(he)),he.reset()},result:function(){var t=Gn/2;return Gn.reset(),t}};function qs(){ft.point=Us}function Us(t,n){ft.point=si,oi=pe=t,ui=ge=n}function si(t,n){he.add(ge*t-pe*n),pe=t,ge=n}function Xs(){si(oi,ui)}const sr=ft;var At=1/0,Rn=At,jt=-At,Cn=jt,Bs={point:Ds,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var t=[[At,Rn],[jt,Cn]];return jt=Cn=-(Rn=At=1/0),t}};function Ds(t,n){t<At&&(At=t),t>jt&&(jt=t),n<Rn&&(Rn=n),n>Cn&&(Cn=n)}const Mn=Bs;var ve=0,de=0,qt=0,An=0,bn=0,mt=0,_e=0,ye=0,Ut=0,li,fi,nt,et,Q={point:vt,lineStart:lr,lineEnd:fr,polygonStart:function(){Q.lineStart=Vs,Q.lineEnd=Gs},polygonEnd:function(){Q.point=vt,Q.lineStart=lr,Q.lineEnd=fr},result:function(){var t=Ut?[_e/Ut,ye/Ut]:mt?[An/mt,bn/mt]:qt?[ve/qt,de/qt]:[NaN,NaN];return ve=de=qt=An=bn=mt=_e=ye=Ut=0,t}};function vt(t,n){ve+=t,de+=n,++qt}function lr(){Q.point=zs}function zs(t,n){Q.point=Ys,vt(nt=t,et=n)}function Ys(t,n){var e=t-nt,r=n-et,i=dt(e*e+r*r);An+=i*(nt+t)/2,bn+=i*(et+n)/2,mt+=i,vt(nt=t,et=n)}function fr(){Q.point=vt}function Vs(){Q.point=Zs}function Gs(){ai(li,fi)}function Zs(t,n){Q.point=ai,vt(li=nt=t,fi=et=n)}function ai(t,n){var e=t-nt,r=n-et,i=dt(e*e+r*r);An+=i*(nt+t)/2,bn+=i*(et+n)/2,mt+=i,i=et*t-nt*n,_e+=i*(nt+t),ye+=i*(et+n),Ut+=i*3,vt(nt=t,et=n)}const ar=Q;function ci(t){this._context=t}ci.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Z);break}}},result:J};var we=Hn(),Zn,hi,pi,Xt,Bt,Pn={point:J,lineStart:function(){Pn.point=Ks},lineEnd:function(){Zn&&gi(hi,pi),Pn.point=J},polygonStart:function(){Zn=!0},polygonEnd:function(){Zn=null},result:function(){var t=+we;return we.reset(),t}};function Ks(t,n){Pn.point=gi,hi=Xt=t,pi=Bt=n}function gi(t,n){Xt-=t,Bt-=n,we.add(dt(Xt*Xt+Bt*Bt)),Xt=t,Bt=n}const cr=Pn;function vi(){this._string=[]}vi.prototype={_radius:4.5,_circle:hr(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._string.push("M",t,",",n),this._point=1;break}case 1:{this._string.push("L",t,",",n);break}default:{this._circle==null&&(this._circle=hr(this._radius)),this._string.push("M",t,",",n,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function hr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ws(t,n){var e=4.5,r,i;function o(u){return u&&(typeof e=="function"&&i.pointRadius(+e.apply(this,arguments)),wt(u,r(i))),i.result()}return o.area=function(u){return wt(u,r(sr)),sr.result()},o.measure=function(u){return wt(u,r(cr)),cr.result()},o.bounds=function(u){return wt(u,r(Mn)),Mn.result()},o.centroid=function(u){return wt(u,r(ar)),ar.result()},o.projection=function(u){return arguments.length?(r=u==null?(t=null,ce):(t=u).stream,o):t},o.context=function(u){return arguments.length?(i=u==null?(n=null,new vi):new ci(n=u),typeof e!="function"&&i.pointRadius(e),o):n},o.pointRadius=function(u){return arguments.length?(e=typeof u=="function"?u:(i.pointRadius(+u),+u),o):e},o.projection(t).context(n)}function Ae(t){return function(n){var e=new me;for(var r in t)e[r]=t[r];return e.stream=n,e}}function me(){}me.prototype={constructor:me,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function be(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),wt(e,t.stream(Mn)),n(Mn.result()),r!=null&&t.clipExtent(r),t}function di(t,n,e){return be(t,function(r){var i=n[1][0]-n[0][0],o=n[1][1]-n[0][1],u=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+n[0][0]+(i-u*(r[1][0]+r[0][0]))/2,f=+n[0][1]+(o-u*(r[1][1]+r[0][1]))/2;t.scale(150*u).translate([s,f])},e)}function Js(t,n,e){return di(t,[[0,0],n],e)}function Qs(t,n,e){return be(t,function(r){var i=+n,o=i/(r[1][0]-r[0][0]),u=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];t.scale(150*o).translate([u,s])},e)}function js(t,n,e){return be(t,function(r){var i=+n,o=i/(r[1][1]-r[0][1]),u=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([u,s])},e)}var pr=16,tl=I(30*F);function gr(t,n){return+n?el(t,n):nl(t)}function nl(t){return Ae({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function el(t,n){function e(r,i,o,u,s,f,a,l,c,h,p,v,g,d){var m=a-r,y=l-i,w=m*m+y*y;if(w>4*n&&g--){var x=u+h,S=s+p,E=f+v,M=dt(x*x+S*S+E*E),b=Qt(E/=M),A=$($(E)-1)<L||$(o-c)<L?(o+c)/2:Jt(S,x),k=t(A,b),N=k[0],U=k[1],H=N-r,P=U-i,_=y*H-m*P;(_*_/w>n||$((m*H+y*P)/w-.5)>.3||u*h+s*p+f*v<tl)&&(e(r,i,o,u,s,f,N,U,A,x/=M,S/=M,E,g,d),d.point(N,U),e(N,U,A,x,S,E,a,l,c,h,p,v,g,d))}}return function(r){var i,o,u,s,f,a,l,c,h,p,v,g,d={point:m,lineStart:y,lineEnd:x,polygonStart:function(){r.polygonStart(),d.lineStart=S},polygonEnd:function(){r.polygonEnd(),d.lineStart=y}};function m(b,A){b=t(b,A),r.point(b[0],b[1])}function y(){c=NaN,d.point=w,r.lineStart()}function w(b,A){var k=Mt([b,A]),N=t(b,A);e(c,h,l,p,v,g,c=N[0],h=N[1],l=b,p=k[0],v=k[1],g=k[2],pr,r),r.point(c,h)}function x(){d.point=m,r.lineEnd()}function S(){y(),d.point=E,d.lineEnd=M}function E(b,A){w(i=b,A),o=c,u=h,s=p,f=v,a=g,d.point=w}function M(){e(c,h,l,p,v,g,o,u,i,s,f,a,pr,r),d.lineEnd=x,x()}return d}}var rl=Ae({point:function(t,n){this.stream.point(t*F,n*F)}});function il(t){return Ae({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}function ol(t,n,e,r,i){function o(u,s){return u*=r,s*=i,[n+t*u,e-t*s]}return o.invert=function(u,s){return[(u-n)/t*r,(e-s)/t*i]},o}function vr(t,n,e,r,i,o){var u=I(o),s=O(o),f=u*t,a=s*t,l=u/t,c=s/t,h=(s*e-u*n)/t,p=(s*n+u*e)/t;function v(g,d){return g*=r,d*=i,[f*g-a*d+n,e-a*g-f*d]}return v.invert=function(g,d){return[r*(l*g-c*d+h),i*(p-c*g-l*d)]},v}function ul(t){return sl(function(){return t})()}function sl(t){var n,e=150,r=480,i=250,o=0,u=0,s=0,f=0,a=0,l,c=0,h=1,p=1,v=null,g=ur,d=null,m,y,w,x=ce,S=.5,E,M,b,A,k;function N(_){return b(_[0]*F,_[1]*F)}function U(_){return _=b.invert(_[0],_[1]),_&&[_[0]*z,_[1]*z]}N.stream=function(_){return A&&k===_?A:A=rl(il(l)(g(E(x(k=_)))))},N.preclip=function(_){return arguments.length?(g=_,v=void 0,P()):g},N.postclip=function(_){return arguments.length?(x=_,d=m=y=w=null,P()):x},N.clipAngle=function(_){return arguments.length?(g=+_?Os(v=_*F):(v=null,ur),P()):v*z},N.clipExtent=function(_){return arguments.length?(x=_==null?(d=m=y=w=null,ce):Hs(d=+_[0][0],m=+_[0][1],y=+_[1][0],w=+_[1][1]),P()):d==null?null:[[d,m],[y,w]]},N.scale=function(_){return arguments.length?(e=+_,H()):e},N.translate=function(_){return arguments.length?(r=+_[0],i=+_[1],H()):[r,i]},N.center=function(_){return arguments.length?(o=_[0]%360*F,u=_[1]%360*F,H()):[o*z,u*z]},N.rotate=function(_){return arguments.length?(s=_[0]%360*F,f=_[1]%360*F,a=_.length>2?_[2]%360*F:0,H()):[s*z,f*z,a*z]},N.angle=function(_){return arguments.length?(c=_%360*F,H()):c*z},N.reflectX=function(_){return arguments.length?(h=_?-1:1,H()):h<0},N.reflectY=function(_){return arguments.length?(p=_?-1:1,H()):p<0},N.precision=function(_){return arguments.length?(E=gr(M,S=_*_),P()):dt(S)},N.fitExtent=function(_,R){return di(N,_,R)},N.fitSize=function(_,R){return Js(N,_,R)},N.fitWidth=function(_,R){return Qs(N,_,R)},N.fitHeight=function(_,R){return js(N,_,R)};function H(){var _=vr(e,0,0,h,p,c).apply(null,n(o,u)),R=(c?vr:ol)(e,r-_[0],i-_[1],h,p,c);return l=ni(s,f,a),M=fe(n,R),b=fe(l,M),E=gr(M,S),P()}function P(){return A=k=null,N}return function(){return n=t.apply(this,arguments),N.invert=n.invert&&U,H()}}function Pe(t,n){return[t,Ns(Cs((D+n)/2))]}Pe.invert=function(t,n){return[t,2*ti(Es(n))-D]};function ll(){return fl(Pe).scale(961/Z)}function fl(t){var n=ul(t),e=n.center,r=n.scale,i=n.translate,o=n.clipExtent,u=null,s,f,a;n.scale=function(c){return arguments.length?(r(c),l()):r()},n.translate=function(c){return arguments.length?(i(c),l()):i()},n.center=function(c){return arguments.length?(e(c),l()):e()},n.clipExtent=function(c){return arguments.length?(c==null?u=s=f=a=null:(u=+c[0][0],s=+c[0][1],f=+c[1][0],a=+c[1][1]),l()):u==null?null:[[u,s],[f,a]]};function l(){var c=C*r(),h=n(As(n.rotate()).invert([0,0]));return o(u==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:t===Pe?[[Math.max(h[0]-c,u),s],[Math.min(h[0]+c,f),a]]:[[u,Math.max(h[1]-c,s)],[f,Math.min(h[1]+c,a)]])}return l()}function bt(){return Math.random()}(function t(n){function e(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return n()*i+r}}return e.source=t,e})(bt);const al=function t(n){function e(r,i){var o,u;return r=r==null?0:+r,i=i==null?1:+i,function(){var s;if(o!=null)s=o,o=null;else do o=n()*2-1,s=n()*2-1,u=o*o+s*s;while(!u||u>1);return r+i*s*Math.sqrt(-2*Math.log(u)/u)}}return e.source=t,e}(bt);(function t(n){function e(){var r=al.source(n).apply(this,arguments);return function(){return Math.exp(r())}}return e.source=t,e})(bt);const cl=function t(n){function e(r){return function(){for(var i=0,o=0;o<r;++o)i+=n();return i}}return e.source=t,e}(bt);(function t(n){function e(r){var i=cl.source(n)(r);return function(){return i()/r}}return e.source=t,e})(bt);(function t(n){function e(r){return function(){return-Math.log(1-n())/r}}return e.source=t,e})(bt);function Ln(){this._=null}function qn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}Ln.prototype={constructor:Ln,insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=dr(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(Tt(this,e),t=e,e=t.U),e.C=!1,r.C=!0,$t(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&($t(this,e),t=e,e=t.U),e.C=!1,r.C=!0,Tt(this,r))),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n=t.U,e,r=t.L,i=t.R,o,u;if(r?i?o=dr(i):o=r:o=i,n?n.L===t?n.L=o:n.R=o:this._=o,r&&i?(u=o.C,o.C=t.C,o.L=r,r.U=o,o!==i?(n=o.U,o.U=t.U,t=o.R,n.L=t,o.R=i,i.U=o):(o.U=n,n=o,t=o.R)):(u=t.C,t=o),t&&(t.U=n),!u){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===n.L){if(e=n.R,e.C&&(e.C=!1,n.C=!0,Tt(this,n),e=n.R),e.L&&e.L.C||e.R&&e.R.C){(!e.R||!e.R.C)&&(e.L.C=!1,e.C=!0,$t(this,e),e=n.R),e.C=n.C,n.C=e.R.C=!1,Tt(this,n),t=this._;break}}else if(e=n.L,e.C&&(e.C=!1,n.C=!0,$t(this,n),e=n.L),e.L&&e.L.C||e.R&&e.R.C){(!e.L||!e.L.C)&&(e.R.C=!1,e.C=!0,Tt(this,e),e=n.L),e.C=n.C,n.C=e.L.C=!1,$t(this,n),t=this._;break}e.C=!0,t=n,n=n.U}while(!t.C);t&&(t.C=!1)}}};function Tt(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function $t(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function dr(t){for(;t.L;)t=t.L;return t}function Dt(t,n,e,r){var i=[null,null],o=X.push(i)-1;return i.left=t,i.right=n,e&&kn(i,t,n,e),r&&kn(i,n,t,r),Y[t.index].halfedges.push(o),Y[n.index].halfedges.push(o),i}function It(t,n,e){var r=[n,e];return r.left=t,r}function kn(t,n,e,r){!t[0]&&!t[1]?(t[0]=r,t.left=n,t.right=e):t.left===e?t[1]=r:t[0]=r}function hl(t,n,e,r,i){var o=t[0],u=t[1],s=o[0],f=o[1],a=u[0],l=u[1],c=0,h=1,p=a-s,v=l-f,g;if(g=n-s,!(!p&&g>0)){if(g/=p,p<0){if(g<c)return;g<h&&(h=g)}else if(p>0){if(g>h)return;g>c&&(c=g)}if(g=r-s,!(!p&&g<0)){if(g/=p,p<0){if(g>h)return;g>c&&(c=g)}else if(p>0){if(g<c)return;g<h&&(h=g)}if(g=e-f,!(!v&&g>0)){if(g/=v,v<0){if(g<c)return;g<h&&(h=g)}else if(v>0){if(g>h)return;g>c&&(c=g)}if(g=i-f,!(!v&&g<0)){if(g/=v,v<0){if(g>h)return;g>c&&(c=g)}else if(v>0){if(g<c)return;g<h&&(h=g)}return!(c>0)&&!(h<1)||(c>0&&(t[0]=[s+c*p,f+c*v]),h<1&&(t[1]=[s+h*p,f+h*v])),!0}}}}}function pl(t,n,e,r,i){var o=t[1];if(o)return!0;var u=t[0],s=t.left,f=t.right,a=s[0],l=s[1],c=f[0],h=f[1],p=(a+c)/2,v=(l+h)/2,g,d;if(h===l){if(p<n||p>=r)return;if(a>c){if(!u)u=[p,e];else if(u[1]>=i)return;o=[p,i]}else{if(!u)u=[p,i];else if(u[1]<e)return;o=[p,e]}}else if(g=(a-c)/(h-l),d=v-g*p,g<-1||g>1)if(a>c){if(!u)u=[(e-d)/g,e];else if(u[1]>=i)return;o=[(i-d)/g,i]}else{if(!u)u=[(i-d)/g,i];else if(u[1]<e)return;o=[(e-d)/g,e]}else if(l<h){if(!u)u=[n,g*n+d];else if(u[0]>=r)return;o=[r,g*r+d]}else{if(!u)u=[r,g*r+d];else if(u[0]<n)return;o=[n,g*n+d]}return t[0]=u,t[1]=o,!0}function gl(t,n,e,r){for(var i=X.length,o;i--;)(!pl(o=X[i],t,n,e,r)||!hl(o,t,n,e,r)||!(Math.abs(o[0][0]-o[1][0])>T||Math.abs(o[0][1]-o[1][1])>T))&&delete X[i]}function vl(t){return Y[t.index]={site:t,halfedges:[]}}function dl(t,n){var e=t.site,r=n.left,i=n.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=n[1],i=n[0]):(r=n[0],i=n[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function _i(t,n){return n[+(n.left!==t.site)]}function _l(t,n){return n[+(n.left===t.site)]}function yl(){for(var t=0,n=Y.length,e,r,i,o;t<n;++t)if((e=Y[t])&&(o=(r=e.halfedges).length)){var u=new Array(o),s=new Array(o);for(i=0;i<o;++i)u[i]=i,s[i]=dl(e,X[r[i]]);for(u.sort(function(f,a){return s[a]-s[f]}),i=0;i<o;++i)s[i]=r[u[i]];for(i=0;i<o;++i)r[i]=s[i]}}function wl(t,n,e,r){var i=Y.length,o,u,s,f,a,l,c,h,p,v,g,d,m=!0;for(o=0;o<i;++o)if(u=Y[o]){for(s=u.site,a=u.halfedges,f=a.length;f--;)X[a[f]]||a.splice(f,1);for(f=0,l=a.length;f<l;)v=_l(u,X[a[f]]),g=v[0],d=v[1],c=_i(u,X[a[++f%l]]),h=c[0],p=c[1],(Math.abs(g-h)>T||Math.abs(d-p)>T)&&(a.splice(f,0,X.push(It(s,v,Math.abs(g-t)<T&&r-d>T?[t,Math.abs(h-t)<T?p:r]:Math.abs(d-r)<T&&e-g>T?[Math.abs(p-r)<T?h:e,r]:Math.abs(g-e)<T&&d-n>T?[e,Math.abs(h-e)<T?p:n]:Math.abs(d-n)<T&&g-t>T?[Math.abs(p-n)<T?h:t,n]:null))-1),++l);l&&(m=!1)}if(m){var y,w,x,S=1/0;for(o=0,m=null;o<i;++o)(u=Y[o])&&(s=u.site,y=s[0]-t,w=s[1]-n,x=y*y+w*w,x<S&&(S=x,m=u));if(m){var E=[t,n],M=[t,r],b=[e,r],A=[e,n];m.halfedges.push(X.push(It(s=m.site,E,M))-1,X.push(It(s,M,b))-1,X.push(It(s,b,A))-1,X.push(It(s,A,E))-1)}}for(o=0;o<i;++o)(u=Y[o])&&(u.halfedges.length||delete Y[o])}var yi=[],Le;function ml(){qn(this),this.x=this.y=this.arc=this.site=this.cy=null}function xt(t){var n=t.P,e=t.N;if(!(!n||!e)){var r=n.site,i=t.site,o=e.site;if(r!==o){var u=i[0],s=i[1],f=r[0]-u,a=r[1]-s,l=o[0]-u,c=o[1]-s,h=2*(f*c-a*l);if(!(h>=-Rl)){var p=f*f+a*a,v=l*l+c*c,g=(c*p-a*v)/h,d=(f*v-l*p)/h,m=yi.pop()||new ml;m.arc=t,m.site=i,m.x=g+u,m.y=(m.cy=d+s)+Math.sqrt(g*g+d*d),t.circle=m;for(var y=null,w=tn._;w;)if(m.y<w.y||m.y===w.y&&m.x<=w.x)if(w.L)w=w.L;else{y=w.P;break}else if(w.R)w=w.R;else{y=w;break}tn.insert(y,m),y||(Le=m)}}}}function Et(t){var n=t.circle;n&&(n.P||(Le=n.N),tn.remove(n),yi.push(n),qn(n),t.circle=null)}var wi=[];function xl(){qn(this),this.edge=this.site=this.circle=null}function _r(t){var n=wi.pop()||new xl;return n.site=t,n}function Kn(t){Et(t),Nt.remove(t),wi.push(t),qn(t)}function Sl(t){var n=t.circle,e=n.x,r=n.cy,i=[e,r],o=t.P,u=t.N,s=[t];Kn(t);for(var f=o;f.circle&&Math.abs(e-f.circle.x)<T&&Math.abs(r-f.circle.cy)<T;)o=f.P,s.unshift(f),Kn(f),f=o;s.unshift(f),Et(f);for(var a=u;a.circle&&Math.abs(e-a.circle.x)<T&&Math.abs(r-a.circle.cy)<T;)u=a.N,s.push(a),Kn(a),a=u;s.push(a),Et(a);var l=s.length,c;for(c=1;c<l;++c)a=s[c],f=s[c-1],kn(a.edge,f.site,a.site,i);f=s[0],a=s[l-1],a.edge=Dt(f.site,a.site,null,i),xt(f),xt(a)}function El(t){for(var n=t[0],e=t[1],r,i,o,u,s=Nt._;s;)if(o=mi(s,e)-n,o>T)s=s.L;else if(u=n-Nl(s,e),u>T){if(!s.R){r=s;break}s=s.R}else{o>-T?(r=s.P,i=s):u>-T?(r=s,i=s.N):r=i=s;break}vl(t);var f=_r(t);if(Nt.insert(r,f),!(!r&&!i)){if(r===i){Et(r),i=_r(r.site),Nt.insert(f,i),f.edge=i.edge=Dt(r.site,f.site),xt(r),xt(i);return}if(!i){f.edge=Dt(r.site,f.site);return}Et(r),Et(i);var a=r.site,l=a[0],c=a[1],h=t[0]-l,p=t[1]-c,v=i.site,g=v[0]-l,d=v[1]-c,m=2*(h*d-p*g),y=h*h+p*p,w=g*g+d*d,x=[(d*y-p*w)/m+l,(h*w-g*y)/m+c];kn(i.edge,a,v,x),f.edge=Dt(a,t,null,x),i.edge=Dt(t,v,null,x),xt(r),xt(i)}}function mi(t,n){var e=t.site,r=e[0],i=e[1],o=i-n;if(!o)return r;var u=t.P;if(!u)return-1/0;e=u.site;var s=e[0],f=e[1],a=f-n;if(!a)return s;var l=s-r,c=1/o-1/a,h=l/a;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*a)-f+a/2+i-o/2)))/c+r:(r+s)/2}function Nl(t,n){var e=t.N;if(e)return mi(e,n);var r=t.site;return r[1]===n?r[0]:1/0}var T=1e-6,Rl=1e-12,Nt,Y,tn,X;function Cl(t,n,e){return(t[0]-e[0])*(n[1]-t[1])-(t[0]-n[0])*(e[1]-t[1])}function Ml(t,n){return n[1]-t[1]||n[0]-t[0]}function yr(t,n){var e=t.sort(Ml).pop(),r,i,o;for(X=[],Y=new Array(t.length),Nt=new Ln,tn=new Ln;;)if(o=Le,e&&(!o||e[1]<o.y||e[1]===o.y&&e[0]<o.x))(e[0]!==r||e[1]!==i)&&(El(e),r=e[0],i=e[1]),e=t.pop();else if(o)Sl(o.arc);else break;if(yl(),n){var u=+n[0][0],s=+n[0][1],f=+n[1][0],a=+n[1][1];gl(u,s,f,a),wl(u,s,f,a)}this.edges=X,this.cells=Y,Nt=tn=X=Y=null}yr.prototype={constructor:yr,polygons:function(){var t=this.edges;return this.cells.map(function(n){var e=n.halfedges.map(function(r){return _i(n,t[r])});return e.data=n.site.data,e})},triangles:function(){var t=[],n=this.edges;return this.cells.forEach(function(e,r){if(s=(o=e.halfedges).length)for(var i=e.site,o,u=-1,s,f,a=n[o[s-1]],l=a.left===i?a.right:a.left;++u<s;)f=l,a=n[o[u]],l=a.left===i?a.right:a.left,f&&l&&r<f.index&&r<l.index&&Cl(i,f,l)<0&&t.push([i.data,f.data,l.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,n,e){for(var r=this,i,o=r._found||0,u=r.cells.length,s;!(s=r.cells[o]);)if(++o>=u)return null;var f=t-s.site[0],a=n-s.site[1],l=f*f+a*a;do s=r.cells[i=o],o=null,s.halfedges.forEach(function(c){var h=r.edges[c],p=h.left;if(!((p===s.site||!p)&&!(p=h.right))){var v=t-p[0],g=n-p[1],d=v*v+g*g;d<l&&(l=d,o=p.index)}});while(o!==null);return r._found=i,e==null||l<=e*e?s.site:null}};function zt(t,n,e){this.k=t,this.x=n,this.y=e}zt.prototype={constructor:zt,scale:function(t){return t===1?this:new zt(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new zt(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};zt.prototype;const xi=5,Al=60,bl=xi-1,Pl=2,Ll=["f94144","f3722c","f8961e","f9844a","f9c74f","90be6d","43aa8b","4d908e","577590","277da1"],kl=["fbf8cc","fde4cf","ffcfd2","f1c0e8","cfbaf0","a3c4f3","90dbf4","8eecf5","98f5e1","b9fbc0"],Tl=["d11a1d","1d386d","007481","e0e9ed","000009","262626","e2e2e2","ffffff"],wr=[...Ll,...kl,...Tl];let at=[];const mr=(t,n=!1)=>{let e={};t.forEach(i=>{Object.entries(i.properties).forEach(([o,u])=>{var f,a;const s=Number(u);e[o]={max:((f=e[o])==null?void 0:f.max)>s?e[o].max:s,min:((a=e[o])==null?void 0:a.min)<s?e[o].min:s}})}),t.reduce((i,o)=>({...i,...o.properties}),{});const r=i=>i.replace(/ OR| AND/g,"");return n?Object.entries(e).reduce((i,[o,u],s)=>({...i,[o]:{property:o,color:`#${wr[s]}`,className:o.replaceAll(" ","-"),max:u.max,min:u.min,label:r(o)}}),{}):Object.entries(e).reduce((i,[o,u],s)=>[...i,{property:o,color:`#${wr[s]}`,className:o.replaceAll(" ","-"),max:u.max,min:u.min,label:r(o)}],[])},$l=(t,n)=>Tn[n]&&t?Math.max(t*Al/Tn[n].max,bl):0;let Il=window.innerWidth,Ol=window.innerHeight;const Yt=ll().center([10.6,43.4]).scale(7e3),Fl=Ws(Yt),Hl=pt("#filters");let xr=[],Tn=[],Sr=[],xe;const Se=pt("#container").append("svg").attr("width",Il).attr("height",Ol),Wn=pt("#tooltip");jr("data/italy_regions_rewind.geojson").then(function(t){Se.append("g").selectAll(".region").data(t.features).enter().insert("path").attr("class","region").attr("d",Fl).style("fill","#ededed45").style("stroke","#000").style("stroke-width","0.5px")});jr("data/data.json").then(function(t){const n=t.filter(e=>e.comune!=="Grand Total"&&e.lat&&e.lon).map(e=>{const{comune:r,lat:i,lon:o,...u}=e;return delete u["Grand Total"],{name:r,lat:i,lon:o,properties:u}});Tn=mr(n,!0),xr=n.flatMap(e=>{const{properties:r,...i}=e;return Sr.push(e),Object.entries(r).map(([o,u])=>({...i,property:o,value:Number(u)}))}),xe=Se.insert("g").selectAll(".marker").data(xr).enter().insert("circle").attr("cx",e=>Yt([e.lon,e.lat])[0]).attr("cy",e=>Yt([e.lon,e.lat])[1]).attr("class","marker").style("fill",e=>{var r;return(r=Tn[e.property])==null?void 0:r.color}).style("opacity",0),Hl.append("div").attr("class","filters-wrapper").selectAll("div").data(mr(n)).enter().append("div").attr("class","item-filter").html(e=>`<span class='pin-color' style="background-color: ${e.color}"></span><span class="filter-name">${e.label}</span>`).on("click",function(e){const r=pt(this);at[e.property]?(delete at[e.property],r.classed("active",!1)):(at[e.property]={...e},r.classed("active",!0));const i=pt(this.parentNode);Object.keys(at).length===Pl?i.classed("disabled",!0):i.classed("disabled",!1),Jn()}),setTimeout(()=>{Se.append("g").raise().selectAll(".comune").data(Sr).enter().append("circle").attr("cx",e=>Yt([e.lon,e.lat])[0]).attr("cy",e=>Yt([e.lon,e.lat])[1]).attr("r",xi).attr("class","comune").style("fill","#000").style("opacity",.3).on("mouseover",function(e){pt(this).style("opacity",1),Wn.html(`<strong>${e.name}</strong>${Object.entries(at).map(([r,i])=>`<li><span style="color:${i.color}">${i.label}</span>: ${e.properties[r]}</li>`).join("")}`).transition().duration(500).style("opacity",1).style("visibility","visible"),Jn(e)}).on("mousemove",function(e){Wn.style("transform",`translate(${Vt.clientX+15}px, ${Vt.clientY-15}px)`)}).on("mouseleave",function(e,r){pt(this).style("opacity",.3),Wn.transition().duration(500).style("opacity",0).style("visibility","hidden"),Jn()})},100)});function Jn(t){xe.filter(n=>t?n.name===t.name&&at[n.property]:at[n.property]).transition().duration(1e3).style("opacity",.5).attr("r",n=>$l(n.value,n.property)),xe.filter(n=>t?n.name!==t.name:!at[n.property]).transition().duration(1e3).style("opacity",0).attr("r",0)}
